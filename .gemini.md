# Project K-Alpha: Event-Driven Prediction Market Bot

## Tech Stack

- **Environment**: Conda (`ev`) with Python 3.11+.
- **SDK**: `kalshi-python==2.1.0`.
- **Configuration**: `pydantic-settings` for strict `.env` loading.
- **Logging**: `colorama` for structured, colored output.

## Critical SDK Nuances (DO NOT VIOLATE)

1.  **Imports**: Always use the plural form: `from kalshi_python.api import markets_api`. The singular `market_api` is incorrect and will fail.
2.  **Authentication**: When calling the `/login` endpoint via `client.call_api`, you **MUST** use the argument `response_type='object'`. Do **NOT** use `response_types_map`.
3.  **Data Structures**: The `get_markets` API response object contains the market list in a `.markets` attribute. Always check for the existence of this attribute before iterating (e.g., `if hasattr(response, 'markets') and response.markets:`).

## Architecture

- **`config.py`**: The single source of truth for all configuration. Fails fast if required environment variables are missing.
- **`utils/logger.py`**: Centralized, color-coded logging service.
- **`services/feed.py`**: Handles all read-only communication with the Kalshi API. Contains all SDK-specific logic.
- **`main.py`**: The main orchestrator. Runs the primary `asyncio` event loop.

## Coding Standards

- **Asynchronous**: Use `asyncio` for the main application loop and any I/O-bound operations. Use `asyncio.to_thread` for blocking SDK calls.
- **Resilience**:
    - **Config Errors**: Fail fast on application startup if the configuration is invalid.
    - **Network Errors**: Fail gracefully for network-related issues. Log the error and retry the operation after a delay. Do not crash the application.
- **Type Hinting**: All code must be fully and correctly type-hinted.
